Index: happy.spec
===================================================================
--- happy.spec	(revision 30)
+++ happy.spec	(working copy)
@@ -24,11 +24,16 @@
 License:        BSD-2-Clause
 URL:            https://hackage.haskell.org/package/%{name}
 Source0:        https://hackage.haskell.org/package/%{name}-%{version}/%{name}-%{version}.tar.gz
+BuildRequires:  autoconf
+BuildRequires:  docbook-dtd
+BuildRequires:  docbook-xsl-stylesheets
 BuildRequires:  ghc-Cabal-devel
 BuildRequires:  ghc-array-devel
 BuildRequires:  ghc-containers-devel
 BuildRequires:  ghc-mtl-devel
 BuildRequires:  ghc-rpm-macros
+BuildRequires:  libxml2
+BuildRequires:  libxslt
 ExcludeArch:    %{ix86}
 %if %{with tests}
 BuildRequires:  ghc-process-devel
@@ -46,9 +51,14 @@
 %build
 %define cabal_configure_options -f-bootstrap
 %ghc_bin_build
+cd doc
+autoreconf
+%configure
+%make_build html
 
 %install
 %ghc_bin_install
+install -D --mode=444 doc/%{name}.1 %{buildroot}%{_mandir}/man1/%{name}.1
 
 %check
 %cabal_test
@@ -58,6 +68,7 @@
 %doc ChangeLog.md README.md doc examples
 %{_bindir}/%{name}
 %dir %{_datadir}/%{name}-%{version}
+%{_mandir}/man1/*
 %{_datadir}/%{name}-%{version}/GLR_Base.hs
 %{_datadir}/%{name}-%{version}/GLR_Lib.hs
 %{_datadir}/%{name}-%{version}/HappyTemplate.hs
